AI 캐릭터 배틀 앱 개요 (HTML 웹 기반, Firebase 연동, 강화된 전투 경험)
AI가 생성한 캐릭터로 배틀을 즐기는 웹 기반 앱으로, 사용자 계정 관리, 캐릭터 생성 및 이미지화, 다른 사용자 캐릭터와의 배틀, 랭킹 시스템, 강화된 소설형 전투 로그, 실시간 전투 게이지 바, 유연한 매칭 시스템을 포함합니다. 모든 이미지 생성 시에는 영어 프롬프트를 활용합니다.

## 1. 주요 기능
### 1.1 사용자 인증 및 계정 관리
- **구글 로그인**: 사용자는 구글 계정으로 로그인하여 앱에 접속합니다.
- **캐릭터 생성 제한**: 각 사용자는 최대 4개의 캐릭터를 생성하고 관리할 수 있습니다.

### 1.2 캐릭터 생성 및 관리
- **캐릭터 정보 입력**: 사용자가 캐릭터 이름과 간단한 설정을 입력합니다.
- **AI 기반 정보 생성**: AI는 입력된 정보를 토대로 캐릭터의 탄생 배경, 상세 정보, 그리고 각각 2개의 공격 스킬과 방어 스킬을 자동으로 생성합니다.
- **캐릭터 이미지 생성**:
  - 캐릭터 정보 생성이 완료되면, AI는 해당 캐릭터의 외형을 나타내는 이미지를 생성합니다.
  - 이미지 생성 시, AI에게 전달되는 프롬프트는 반드시 영어로 작성됩니다. 이는 일관된 이미지 품질과 AI 모델과의 호환성을 위한 조치입니다.
- **배틀 등록 조건**: 생성된 모든 캐릭터 정보(이름, 설정, 탄생 배경, 스킬, 이미지)가 완전히 생성되어야만 해당 캐릭터를 배틀에 등록하고 다른 캐릭터와 싸우게 할 수 있습니다.
- **캐릭터 정보 확인**: 사용자는 자신이 생성한 캐릭터 목록을 언제든지 확인하고 상세 정보를 볼 수 있습니다.

### 1.3 배틀 시스템
- **배틀 등록**: 생성 완료된 캐릭터만 배틀에 참여할 수 있습니다.
- **캐릭터 선택 및 매칭**:
  - **내 캐릭터 선택**: 로그인한 사용자는 자신이 만든 캐릭터 중에서 배틀에 참여할 캐릭터를 선택합니다.
  - **스킬 장착**: 선택된 각 캐릭터는 보유한 공격/방어 스킬 중 딱 2개만 장착하여 배틀에 임합니다.
  - **상대 캐릭터 매칭**:
    - 사용자는 파이어베이스에 등록된 캐릭터 중 직접 골라 전투를 할 수 있습니다.
    - 또는 랜덤 매칭을 통해 다른 사용자의 등록된 캐릭터와 전투할 수 있습니다. (사용자 자신의 캐릭터끼리도 싸울 수 있습니다.)
- **실시간 텍스트 배틀 중계 및 게이지 바**:
  - 배틀이 시작되면 AI가 각 캐릭터의 스킬과 설정 정보를 바탕으로 가상 전투 내용을 텍스트로 실시간 중계합니다.
  - 웹 페이지 상단 또는 하단에 **게이지 바(Progress Bar)**가 표시됩니다.
  - 게이지 바는 AI가 텍스트를 중계하는 횟수에 비례하여 채워집니다. 예를 들어, 총 10번의 중계가 있다면 한 번 중계될 때마다 10%씩 게이지가 차오르는 식입니다.
  - 게이지 바가 가득 차면 전투가 자동으로 종료됩니다.
- **소설 형식 전투 로그 (강화)**:
  - 배틀 종료 후, 해당 전투의 전 과정을 소설 형식으로 자세하게 보여줍니다.
  - AI는 두 캐릭터가 어떻게 만나게 되었는지에 대한 배경 스토리를 생성하여 로그 서두에 포함합니다.
  - 전투 과정에는 각 캐릭터의 행동, 스킬 사용, 상황 변화 등과 함께 캐릭터들의 대사(dialogue)도 포함하여 더욱 생동감 넘치는 스토리를 제공합니다. AI가 진짜 소설처럼 자연스럽게 이야기를 전개합니다.
- **전투 이미지 생성 요청**: 소설 형식의 전투 로그를 보는 동안, 사용자가 원하는 시점에 "전투 이미지 생성" 버튼을 눌러 해당 장면의 이미지를 생성할 수 있습니다. 이 또한 영어 프롬프트를 통해 AI에게 전달되며, 각 캐릭터의 외형과 전투 상황이 일관성 있게 반영된 이미지가 생성됩니다.

### 1.4 캐릭터 공유 및 랭킹 시스템
- **파이어베이스 연동**: 생성된 모든 캐릭터 정보와 배틀 기록은 **파이어베이스(Firebase)**에 저장되어 다른 사용자들과 공유되며, 유연한 매칭 시스템에 활용됩니다.
- **캐릭터 랭킹**: 배틀 승률을 기준으로 실시간 캐릭터 랭킹 시스템을 제공합니다.
- **랭킹 보기**: 사용자는 언제든지 캐릭터 랭킹 시스템을 볼 수 있으며, 모달창 형태로 승률이 가장 높은 상위 10개 캐릭터 목록을 확인할 수 있습니다.
- **랭킹 상세 정보**: 랭킹 모달창에 표시된 각 캐릭터를 클릭하면 해당 캐릭터의 **모든 정보(이름, 설정, 탄생 배경, 스킬, 이미지, 승률 등)**를 확인할 수 있습니다.

## 2. 기술 스택
- **HTML**: 웹 페이지의 구조와 콘텐츠를 정의합니다.
- **CSS**: 웹 페이지의 디자인과 레이아웃을 담당합니다. (게이지 바 스타일링 포함)
- **JavaScript**:
  - **프론트엔드 로직**: 사용자 입력 처리, DOM 조작, 애니메이션 구현 (게이지 바 포함).
  - **AI 연동**:
    - **텍스트 기반 AI (LLM)**: 캐릭터 정보 생성, 스킬 생성, 배틀 중계 텍스트, 소설 형식 전투 로그 (만남 배경, 대사 포함) 생성에 사용됩니다. (예: Google Gemini API, OpenAI GPT API 등)
    - **이미지 생성 AI (Diffusion Model)**: 캐릭터 이미지, 전투 장면 이미지 생성에 사용됩니다. 반드시 영어 프롬프트를 사용하여 AI에 요청합니다. (예: Midjourney API, DALL-E API, Stability AI API 등)
  - **Firebase 연동**: 데이터 저장, 읽기, 사용자 인증, 실시간 데이터 동기화를 처리합니다.
- **Firebase**:
  - **Authentication**: 구글 로그인 기반 사용자 인증 및 관리.
  - **Firestore (NoSQL Database)**: 사용자 정보, 캐릭터 데이터, 배틀 기록, 랭킹 데이터 등 모든 애플리케이션 데이터를 저장하고 실시간으로 동기화합니다.
  - **Storage**: 생성된 캐릭터 이미지 및 전투 이미지 파일 저장.
  - **Cloud Functions (선택 사항)**: AI API 호출, 복잡한 랭킹 계산, 데이터 처리 등 백엔드 로직을 서버리스 환경에서 실행하여 클라이언트 부담을 줄입니다.

## 3. 구현 단계별 고려사항
1. **Firebase 프로젝트 초기 설정 및 인증 구현**: Firebase 프로젝트를 설정하고 구글 로그인 기능을 웹 앱에 통합합니다.
2. **캐릭터 생성 UI 및 AI 연동 (이미지 생성 포함)**:
   - 사용자 입력 폼과 AI 생성 정보 표시 영역을 구축합니다.
   - JavaScript로 AI 텍스트 생성 API와 영어 프롬프트 기반의 이미지 생성 API를 연동하여 캐릭터 정보를 완성합니다. 생성된 정보를 Firebase에 저장합니다.
3. **캐릭터 목록 및 상세 정보 관리**: Firebase Firestore에서 사용자별 캐릭터 데이터를 불러와 표시하고, 배틀 등록 가능 여부를 관리합니다.
4. **배틀 시스템 핵심 로직 (강화)**:
   - **캐릭터 선택 및 매칭 UI**: 파이어베이스에 등록된 캐릭터 목록에서 선택하거나 랜덤 매칭을 시작하는 UI를 구현합니다.
   - **스킬 장착 UI**: 선택된 캐릭터의 스킬 중 2개를 고르는 인터페이스를 구현합니다.
   - **배틀 시뮬레이션 및 AI 중계**: AI가 각 캐릭터의 스킬, 설정, 특성을 기반으로 배틀 상황을 시뮬레이션하고 승패를 결정합니다. 이 과정에서 AI는 실시간 중계 텍스트와 소설 형식 로그를 생성합니다.
   - **게이지 바 구현**: JavaScript와 CSS로 게이지 바를 만들고, AI의 중계 횟수에 따라 게이지가 점진적으로 차오르도록 동적으로 업데이트합니다. 게이지가 꽉 차면 전투가 종료됩니다.
5. **소설 형식 전투 로그 및 전투 이미지 생성 (강화)**:
   - 배틀 종료 후, AI가 생성한 만남 배경, 대사, 상세한 전투 과정이 포함된 소설 형식 전투 로그를 표시합니다.
   - 로그 내에서 "전투 이미지 생성" 버튼을 구현하여, 사용자가 요청 시 AI 이미지 생성 API를 영어 프롬프트로 호출하고, 해당 전투 이미지를 로드하여 표시합니다. 캐릭터 외형의 일관성을 유지하는 것이 중요합니다.
6. **캐릭터 랭킹 시스템 구현**:
   - 배틀 결과(승패)를 Firebase Firestore에 기록합니다.
   - Firestore의 쿼리 또는 Cloud Functions를 활용하여 각 캐릭터의 승률을 계산하고 랭킹을 실시간으로 업데이트합니다.
   - 랭킹 데이터를 불러와 모달창으로 표시하며, 각 랭킹 항목 클릭 시 해당 캐릭터의 상세 정보를 보여주는 로직을 구현합니다.

## 4. 추가 고려사항
- **AI 프롬프트 엔지니어링**: AI가 소설 형식의 전투 로그(만남 배경, 대사 포함)와 전투 이미지를 자연스럽고 일관성 있게 생성하도록 효과적인 영어 프롬프트를 설계하는 것이 중요합니다.
- **사용자 경험 (UX)**: 게이지 바의 부드러운 애니메이션, 전투 로그의 가독성, 직관적인 UI 등 전반적인 사용자 경험을 최적화하는 데 집중합니다.
- **성능 최적화**: AI API 호출 및 이미지 생성은 시간이 소요될 수 있으므로, 로딩 인디케이터나 비동기 처리 등 사용자에게 진행 상황을 명확히 알리는 기능을 구현하여 대기 시간을 관리합니다.
- **Firebase 데이터 스키마**: 사용자, 캐릭터, 배틀 기록, 랭킹 등 복잡한 데이터 구조를 Firebase Firestore에 효율적으로 설계하여 확장성과 쿼리 성능을 확보합니다.
- **보안**: AI API 키 등 민감 정보는 클라이언트 측에 노출되지 않도록 Firebase Cloud Functions와 같은 서버리스 환경을 적극 활용하여 안전하게 처리합니다.
